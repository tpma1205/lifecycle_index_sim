<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>生命週期投資配合生命週期模擬器</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>📊 指數投資配合生命週期模擬器</h1>
        <p>計算您的理財目標達成年齡與退休資金規劃</p>
      </header>

      <main>
        <section class="input-section">
          <h2>📝 基本資料設定</h2>
          <div class="form-grid">
            <div class="form-group">
              <label for="currentAge">當前年齡</label>
              <input
                type="number"
                id="currentAge"
                placeholder="例：30"
                value="30"
                min="20"
                max="80"
                oninput="updateLeverageInputsState()"
              />
            </div>
            <div class="form-group">
              <label for="currentNW">當前淨資產（萬元）</label>
              <input
                type="number"
                id="currentNW"
                placeholder="例：100"
                value="100"
                min="0"
              />
            </div>
            <div class="form-group">
              <label for="monthlyInv">每月投入金額（元）</label>
              <input
                type="number"
                id="monthlyInv"
                placeholder="例：20000"
                value="20000"
                min="0"
              />
            </div>
            <div class="form-group">
              <label for="annualReturn">預期年化報酬率（%）</label>
              <input
                type="number"
                id="annualReturn"
                placeholder="例：8"
                value="8"
                min="0"
                max="20"
                step="0.5"
              />
            </div>
            <div class="form-group">
              <label for="annualInflation">平均年通膨率（%）</label>
              <input
                type="number"
                id="annualInflation"
                placeholder="例：2"
                value="2"
                min="0"
                max="10"
                step="0.5"
              />
            </div>
            <div class="form-group">
              <label for="targetNW">目標淨資產（萬元）</label>
              <input
                type="number"
                id="targetNW"
                placeholder="例：1000"
                value="1000"
                min="0"
              />
            </div>
            <div class="form-group">
              <label for="retireAge">預計退休年齡</label>
              <input
                type="number"
                id="retireAge"
                placeholder="例：65"
                value="65"
                min="0"
                max="100"
              />
            </div>
            <div class="form-group">
              <label for="withdrawAmount">退休後每年提領金額（萬元）</label>
              <input
                type="number"
                id="withdrawAmount"
                placeholder="例：50"
                value="50"
                min="0"
              />
            </div>
          </div>

          <h2>🎯 槓桿倍數設定（每 5 年一區間）</h2>
          <div class="leverage-grid">
            <div class="form-group">
              <label for="lev2025">20~25 歲</label>
              <input
                type="number"
                id="lev2025"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev2630">26~30 歲</label>
              <input
                type="number"
                id="lev2630"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev3135">31~35 歲</label>
              <input
                type="number"
                id="lev3135"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev3640">36~40 歲</label>
              <input
                type="number"
                id="lev3640"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev4145">41~45 歲</label>
              <input
                type="number"
                id="lev4145"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev4650">46~50 歲</label>
              <input
                type="number"
                id="lev4650"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev5155">51~55 歲</label>
              <input
                type="number"
                id="lev5155"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev5660">56~60 歲</label>
              <input
                type="number"
                id="lev5660"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev6165">61~65 歲</label>
              <input
                type="number"
                id="lev6165"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label for="lev66plus">66歲以上</label>
              <input
                type="number"
                id="lev66plus"
                placeholder="例：1"
                value="1"
                min="1"
                max="3"
                step="0.01"
              />
            </div>
          </div>

          <div class="action-buttons">
            <button class="btn-simulate btn-auto" onclick="autoSetLeverage()">
              ⚡ 自動設定建議槓桿倍數
            </button>
            <button class="btn-simulate btn-reset" onclick="resetLeverage()">
              🔄 取消槓桿
            </button>
          </div>

          <button class="btn-simulate btn-run" onclick="runSimulation()">
            🚀 開始模擬
          </button>
        </section>

        <section
          class="results-section"
          id="resultsSection"
          style="display: none"
        >
          <h2>📊 模擬結果</h2>
          <div class="results-grid">
            <div class="result-card">
              <h3>🎯 目標達成</h3>
              <p id="targetResult">計算中...</p>
            </div>
            <div class="result-card">
              <h3>🏠 退休時資產</h3>
              <p id="retireResult">計算中...</p>
            </div>
            <div class="result-card">
              <h3>💰 資金耗盡</h3>
              <p id="deathResult">計算中...</p>
            </div>
            <div class="result-card">
              <h3>💵 總投入成本</h3>
              <p id="totalInvestmentResult">計算中...</p>
            </div>
          </div>

          <div class="chart-container">
            <canvas id="myChart"></canvas>
          </div>
        </section>

        <section class="references-section">
          <h2>📚 核心概念與參考文獻</h2>
          <ul class="reference-list">
            <li>
              <strong
                >Life-Cycle Investing and Leverage: Buying Stock on Margin Can
                Reduce Retirement Risk</strong
              >
              <p>
                該論文解釋投資風險應分散至整個生命週期，年輕時應透過使用槓桿增加股市曝險，藉此在相同風險下極大化退休財富
              </p>
            </li>
            <li>
              <strong
                >Daily leverage and long-term investing using leveraged exchange
                traded funds</strong
              >
              <p>
                該論文解釋生命週期投資法中，槓桿型ETF是否可作為增加曝險的合理工具
              </p>
            </li>
            <li>
              <strong
                >Retirement Spending: Choosing a Sustainable Withdrawal
                Rate</strong
              >
              <p>
                該論文解釋退休後每年提領的比例為總資產的4%(隨通膨調整)，高機率可於退休後30年內保持提領而不耗盡資產。
              </p>
            </li>
            <li>
              <strong
                >beyond the status quo a critical assessment of lifecycle
                investment advice</strong
              >
              <p>
                該論文論證100%的多元化股票配置可極大化退休財富累積與降低資金耗盡風險。
              </p>
            </li>
          </ul>
        </section>
      </main>

      <footer>
        <p>💡 本工具僅供參考，實際投資結果可能因市場波動而異。</p>
      </footer>
    </div>

    <script src="simulator.js"></script>
  </body>
</html>
